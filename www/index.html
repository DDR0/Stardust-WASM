<!doctype html>
<html>
	<head>
		<meta charset='utf-8'>
		<title>DDR's Stardust</title>
		<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
		<meta name="theme-color" content="#8b4c35">
	</head>
	<body>
		<div id=input-data>
			<h2>Input</h2>
			<!-- 
			<div>
				<label>Name: <input id=filename></label>
				<button title="Save">&#x1F4BE</button><button title="Load">&#x1F4C2</button>
			</div>
			 -->
			<ol class="code editable" contenteditable="true" spellcheck="false">
				<li>#from-node to-node</li>
				<li>A B</li>
				<li></li>
				<li>#from-node to-node edge-weight</li>
				<li>B C 4</li><li>test2</li>
				<li></li>
				<li>#from-node to-node edge-label</li>
				<li>C A "textual label"</li>
				<li></li>
				<li>#Node with properties</li>
				<li><b>Cat</b> <u>shape=box</u> colour=blue bold=yes fixed=yes&nbsp;<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAA7CAIAAABJ8GvMAAAFF0lEQVRoBe2Z61MTVxjG/Vtics6GYAgUsJG7M9hCRCqggMIAyk1subXFYrW0YnUAnSK01UgRKBKohXHKpR3A1gZ1EEptHbWghBYEGTDmsks2u3zrLGRTsoawkQ1snZ05H3aTnXPO733e992TJ1sgInrNxpbXjAciIgHp/5ClgkqCSpvSe4TEExJPSDxuzjFCLQm1JNQSX2tJCncNg+JFeuBg917ocq9QUQ0KSZDbALdyoarMA+0B+n8MVLXUSB4HxSyQ/L4ChYsgr4UTJNkeDyDZWwgMv8EKCcbDyM9hxAHXYtqndXmBhH7EAySXW3Q3FeXZLRwgIW+EpZ248ENvRZK3Y82spZIX3P2YLjnniRf03tUbjZX5MUHbHGdeNQqS2Np760GCQfG5lZr+cYOZIDHrVF2Km0gI3F4Go6uhqpNqD85qKbjkVwwlSXRhdrhbfSxjlxxxCiMNOT1oIElsebwKEuIfcehkbfefkwsERhIm/eM+TdXRfaFSZpKspRL9vDgP5DtHQsT+UaknL7aPPNUTJEZY53S3vj1XFBsiZ4jml1ZRr2lt0nRop3DULSQkZN/Rc20/64xmgkRxw6OBtrPvJwcpnEYOEUEOkOity3xVWccv9wzN2ET77ce644ejfKSOS8tS1JO4gTVSwEH1H5QshHVu4k5Ldcn+nb70eo7z0rHnFIleQqZ8O6f84k/3l3cyP9FXGu1l34YkpnrEYhlhjRRSosUwktCP95zOVim86DX+A3j5Ew5VcphcGppYWH93Cicw69NvUu0FLN3x6W0DPqlmjSQLSPiwquPuuJmqH/30SMelsrToQMlGIsnD9hZWNfwyNmMhMMIy81f/5fKsnb7bMq8bUXtvIEmMNZItTpJAVcaphu6H80aqXtGJ37u/LMuKDJTZ1V9xAcP72bxqEfGRVdvD0mwKZWLxGc3NB3qc6n7mqYGOmsLkCC9bNGVRpY2NmtamawOjFsKg0za7i0TvWLEj6YPK7wefmKzUMuj0YFdNWqiU/naZHwZ3gSICvJOyxrFgaxrII0B+J3xJc0VUaXPvmN5Ehc8y/ahPfSpnlfAhktiae5aFoSqV+FWRaNECVOmfXel6MGfAV6a1DcnnPHV4y26AwFV+IqIgeNAMip6BYCUDnipg1DSpbb9QkBROy2Jb2jF8UmXZLQP+96Vkb64MZB/l/pz4cIZKiCgcHpinhMrWgoRrIOE7ELGHsWkbvLKVetvm/wMS26kn48qXFfN9K+NwZIDTrGaA+ed2vTA/v56p8LgnDmE8jLsD3kVBEQmKSZCQ7RQJEclhSB3InKXAihdBQR+EroVlfCtLrZvC9TdPBAo2P0Nrvt6usz041ig/IAUkfujA6A2MW0ElQSVGSmzMrZB4LBJvk63JgFwPqLSp1qQiR+MBJLuSLH/VUudArqxJJP2qjgdI9hCs/8I7vn7CxAESf6xJr7gvRi3umV6MEx1vrEmbvGLV+eEFkr3ptSIr+GdNLsVaGnZmyEDiD91KPF5bk0hY6QCGWp81sUbivTWpPNZjJFBDTx5rJL5bkz4F3bME8UL7yZuskXhrTS4Xue+h9jkzSTzXDXayRrK1B/5Zk0sbk2c0TFvX8WcMdaDmlzUJkq+M4qTpiTpWtm7TS8ILa1IW8/WYkbTqmtMR7kyvTbUmpTEV9y2Ydb7tiB/1gnK3lhgHiLVuN8KaFEeevb1Aosbe/O1LdeVhJFtTWYuc08cEJE7D6SEr4l8nRLz5kbUQagAAAABJRU5ErkJggg==" alt=""></li>
				<li></li>
				<li>#from-node to-node weighted-label with property</li>
				<li>Hand Cat 2 pats color=forestgreen</li>
			</ol>
			<div>
				<span>Nodes: <span id="node-count">-</span>/65k</span>
				<span>Links: <span id="link-count">-</span>/65k</span>
			</div>
			<div>
				Auto-Optimize Graph Layout:
				<label>On <input type=radio name=optimize value=on checked></label>
				<label>Off <input type=radio name=optimize value=off></label>
			</div>
		</div>
		<div id=graph>
			<h2>Graph</h2>
			<svg xmlns="http://www.w3.org/2000/svg" width="600" height="400">
				<defs>
					<!-- Adapted from the standard Inkscape arrow. -->
					<marker id="Arrow1Lend" inkscape:stockid="Arrow1Lend" orient="auto" style="overflow:visible;">
						<path
							d="M0,0L5,-5L-12.5,0L5,5L0,0z"
							style="stroke: var(--line-colour); stroke-width:1pt; fill: var(--line-colour);"
							transform="scale(0.8) rotate(180) translate(12.5,0)"
						/>
					</marker>
					
					<!-- Adapted from https://stackoverflow.com/questions/6088409/svg-drop-shadow-using-css3, in turn from http://dahlstrÃ¶m.net/svg/filters/arrow-with-dropshadow-lighter.svg. -->
					<filter id="dropshadow" height="120%">
						<feGaussianBlur in="SourceAlpha" stdDeviation="1"/> <!-- stdDeviation is how much to blur -->
						<feOffset dx="0" dy="0.9" result="offsetblur"/> <!-- how much to offset -->
						<feComponentTransfer>
							<feFuncA type="linear" slope="0.25"/> <!-- slope is the opacity of the shadow -->
						</feComponentTransfer>
						<feMerge> 
							<feMergeNode/> <!-- this contains the offset blurred image -->
							<feMergeNode in="SourceGraphic"/> <!-- this contains the element that the filter is applied to -->
						</feMerge>
					</filter>
					
					<!--We can't use <template> in SVG, so we'll store our templates here instead.-->
					<g id="graph-link-templates">
						<!-- 0. unidirectional link -->
						<g class="graph-link">
							<path d="m 129,235 19,-26" class="cursor-padding" />
							<path d="m 129,235 19,-26" style="marker-end:url(#Arrow1Lend)" />
							<text x="23.95" y="72.57">Link Name</text>
						</g>
					</g>
					
					<g id="graph-node-templates">
						<!-- 0. circle node -->
						<g class="graph-node">
							<circle r="18" cy="33.02" cx="33" />
							<text y="35.01" x="33.02">Test</text>
						</g>
						
						<!-- 1. box node -->
						<g class="graph-node">
							<rect y="21.44" x="59.55" height="23.37" width="45.94" />
							<text y="35.24" x="81.97">Box Marker</text>
						</g>
						
						<!-- 2. lozenge node -->
						<g class="graph-node">
							<rect y="58.14" x="39.85" height="23.37" width="45.93" ry="11.685" />
							<text y="71.94" x="62.27">Lozenge Marker</text>
						</g>
						
						<!-- 3. text node -->
						<g class="graph-node">
							<text x="23.95" y="72.57">Text Node</text>
						</g>
					</g>
				</defs>
				
				<g id="graph-layer-links" class="graph-layer"></g>
				<g id="graph-layer-nodes" class="graph-layer"></g>
			</svg>
		</div>
		<div id=help>
			<h2>Help</h2>
			
			<h3>Controls</h3>
			<ul>
				<li>Click/tap on a node to rename it.</li>
				<li>Drag a node to move it.</li>
				<li>Hold ctrl and drag a node to draw a new edge, or hold the first node and tap the second node.</li>
				<li>Right-click or long-tap a node to bring up a menu to recolour, reshape, or freeze the node.</li>
				<li>Drag on the background, use the arrow keys, or use two fingers to pan the graph.</li>
			</ul>
			
			<h3>Graph Syntax</h3>
			<ol class="code">
				<li>#from-node to-node</li>
				<li>A B</li>
				<li></li>
				<li>#from-node to-node edge-weight</li>
				<li>B C 4</li>
				<li></li>
				<li>#from-node to-node edge-label</li>
				<li>C A "textual label"</li>
				<li></li>
				<li>#from-node with properties</li>
				<li>Cat shape=box color=blue bold=yes fixed=yes image=https://placekitten.com/80/80</li>
				<li></li>
				<li>#from-node to-node weighted-label with property</li>
				<li>Hand Cat 2-pats color=forestgreen</li>
			</ol>
			<p>Any value can be quoted to allow spaces in it. Backslash escapes spaces, quotes, and other backslashes.</p>
			
			<h3>Tech & Limits</h3>
			<p>While you are limited to several thousand nodes maximum, it is likely you will run into resource issues before then. If this is the case, it is recommended to move to a native solution like Dot.</p>
			<p>This website does try to make use of all available performance, by using a WASM-based multi-threaded optimizer. However, rendering is still done on the main thread by necessity, and rendering very large SVGs can be slow.</p>
		</div>
	</body>
</html>